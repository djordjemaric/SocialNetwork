image: maven:3.9.6-openjdk-17

definitions:
  steps:
    - step: &build
        name: Build the application
        caches:
          - maven
        script:
          - mvn -B clean package -DskipTests --file pom.xml
        artifacts:
          - target/*.jar

    - step: &test
        name: Run Tests
        caches:
          - maven
        script:
          - mvn -B test -Dtest=GroupControllerTests,GroupServiceTests --file pom.xml

pipelines:
  default:
    - step: *build
    - step: *test
